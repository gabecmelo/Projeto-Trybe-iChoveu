(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(e){if(e.ep)return;e.ep=!0;const o=a(e);fetch(e.href,o)}})();const g="dffdce6c44e44be6b63185239232706",I=async n=>{const a=await(await fetch(`http://api.weatherapi.com/v1/search.json?lang=pt&key=${g}&q=${n}&aqi=no`)).json();return(a.length===0||!n)&&alert("Nenhuma cidade encontrada"),a},v=async n=>await Promise.all(n.map(async a=>{const t=a.url,e=await(await fetch(`http://api.weatherapi.com/v1/current.json?lang=pt&key=${g}&q=${t}`)).json(),o=e.current;return{name:e.location.name,country:e.location.country,temp:o.temp_c,condition:o.condition.text,icon:o.condition.icon,url:t}})),x=(n,c)=>{const a=document.querySelector(c);n.map(t=>a.appendChild(t))},L="dffdce6c44e44be6b63185239232706",k=7,B=async n=>(await(await fetch(`http://api.weatherapi.com/v1/forecast.json?lang=pt&key=${L}&q=${n}&days=${k}`)).json()).forecast.forecastday.map(t=>({date:t.date,maxTemp:t.day.maxtemp_c,minTemp:t.day.mintemp_c,condition:t.day.condition.text,icon:t.day.condition.icon}));function i(n,c,a=""){const t=document.createElement(n);return t.classList.add(...c.split(" ")),t.textContent=a,t}function $(n){const{date:c,maxTemp:a,minTemp:t,condition:e,icon:o}=n,s=new Date(c);s.setDate(s.getDate()+1);const l=s.toLocaleDateString("pt-BR",{weekday:"short"}),r=i("div","forecast"),h=i("p","forecast-weekday",l),y=i("span","forecast-temp max","max"),E=i("span","forecast-temp max",`${a}\xBA`),C=i("span","forecast-temp min","min"),m=i("span","forecast-temp min",`${t}\xBA`),d=i("div","forecast-temp-container");d.appendChild(y),d.appendChild(C),d.appendChild(E),d.appendChild(m);const p=i("p","forecast-condition",e),f=i("img","forecast-icon");f.src=o.replace("64x64","128x128");const u=i("div","forecast-middle-container");return u.appendChild(d),u.appendChild(f),r.appendChild(h),r.appendChild(u),r.appendChild(p),r}function w(n){const c=document.getElementById(n);for(;c.firstChild;)c.removeChild(c.firstChild)}function b(n){const c=document.getElementById("forecast-container"),a=document.getElementById("weekdays");w("weekdays"),n.forEach(t=>{const e=$(t);a.appendChild(e)}),c.classList.remove("hidden")}function D(n){const{name:c,country:a,temp:t,condition:e,icon:o,url:s}=n,l=i("li","city"),r=i("div","city-heading"),h=i("h2","city-name",c),y=i("p","city-country",a);r.appendChild(h),r.appendChild(y);const E=i("p","city-temp",`${t}\xBA`),C=i("p","city-condition",e),m=i("div","city-temp-container");m.appendChild(C),m.appendChild(E);const d=i("img","condition-ico n");d.src=o.replace("64x64","128x128");const p=i("div","city-info-container");p.appendChild(m),p.appendChild(d),l.appendChild(r),l.appendChild(p);const f=i("button","city-forecast-button","Ver previs\xE3o");return l.appendChild(f),f.addEventListener("click",async()=>{const u=await B(s);b(u)}),l}async function T(n){n.preventDefault(),w("cities");const a=document.getElementById("search-input").value,t=await I(a),o=(await v(t)).map(s=>D(s));x(o,"#cities")}document.getElementById("search-form").addEventListener("submit",T);document.getElementById("close-forecast").addEventListener("click",()=>{document.getElementById("forecast-container").classList.add("hidden")});
